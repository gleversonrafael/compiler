import{signOut as e}from"firebase/auth";import{auth as t}from"../general/jsfirebase.js";import{fetchOwnUserData as n}from"./jsuserdata.js";import{setPageChangeEvents as l}from"../general/jspagechange.js";import{refreshAnimations as s}from"./jsreusablestructures.js";let mMenuB=document.getElementById("mMenuB");async function loadDefaults(){window.innerWidth>=768&&toggleMenu(),setMenuEvents(),await loadNameAndType(),changeSelectedBoxStyle()}function setMenuEvents(){document.getElementById("signoutB").onclick=()=>{e(t)},document.getElementById("leaveM").addEventListener("click",()=>{toggleMenu()}),document.getElementById("menuIcon").addEventListener("click",()=>{toggleMenu()}),window.addEventListener("resize",()=>{let e=document.getElementById("mMenuB");window.innerWidth>=768&&e.classList.contains("menuClosed")&&toggleMenu(),toggleLeaveMenuBox()})}function toggleMenu(){let e=document.getElementById("menuIcon"),t=document.getElementById("mMenuB"),n=[document.getElementById("mMenu"),document.getElementById("userSec"),],l,a,o;t.classList.contains("menuClosed")?(o="Open",a="",t.classList.remove("menuClosed"),e.classList.add("menuChildClosed")):(o="Closed",a="0.3s menuANIM linear reverse forwards",t.classList.remove("menuOpen"),e.classList.add("menuChildOpen")),function s(){t.classList.add("menu"+o),e.classList.remove(`menuChild${o}`),l=`menuChild${o}`;for(let a=0;a<n.length;a++)n[a].style.opacity="Open"===o?1:0}(),s([t],[a]),toggleLeaveMenuBox(),setTimeout(function e(){for(let t=0;t<n.length;t++)"menuChildOpen"===l?n[t].classList.remove("menuChildClosed"):n[t].classList.remove("menuChildOpen"),n[t].classList.add(l)},200)}function toggleLeaveMenuBox(){let e=document.getElementById("leaveM");(window.innerWidth>=768&&"none"!=e.style.display||window.innerWidth<768&&"none"===e.style.display)&&(e.style.display="none"!=e.style.display?"none":"flex")}async function loadNameAndType(){let e=await n(),t=document.getElementById("userName"),l=document.getElementById("userType");t.textContent=e.name,l.textContent="regular"==e.usertype?"Regular":"Administrador"}function changeSelectedBoxStyle(){let e=document.getElementsByClassName("selectedMenuBox").item(0);if(e){let t=document.querySelector(`#${e.id} img`);t.src=t.src.replace(/fill-/,""),e.classList.remove("selectedMenuBox")}!function e(){let t=["home","mycourses","managecourses","manageusers"];for(let n=0;n<t.length;n++)window.location.href.includes(t[n])&&l(t[n],`${t[n]}JS`);function l(e,t){let n=document.getElementById(t),l=document.querySelector(`#${t} img`);n.classList.add("selectedMenuBox"),l.setAttribute("src",`../media/ico/menu/fill-${e}.svg`)}}()}mMenuB&&"true"!=mMenuB.dataset.loadState&&(await loadDefaults(),l(),mMenuB.dataset.loadState="true");export{changeSelectedBoxStyle};