import{getDoc as e,doc as t}from"firebase/firestore";import{onAuthStateChanged as n}from"firebase/auth";import{auth as r,db as a}from"./jsfirebase.js";let currentUserBasicInformation=await obtainCurrentUserBasicInformation();async function obtainCurrentUserBasicInformation(){let e={};await obtainCurrentUID().then(t=>Object.defineProperty(e,"uid",{value:t,enumerable:!0}));let{usertype:t}=await fetchOwnUserData();return Object.defineProperty(e,"usertype",{value:t,enumerable:!0}),e}async function fetchOwnUserData(){let n,r=await obtainCurrentUID();return"noUserFound"!==(n=null!=r?await i():"noDataObtained")&&n;async function i(){let i=t(a,"usersInfo",r),o;return await e(i).then(e=>{let t=e.id;Object.defineProperty(n=e.data(),"uid",{value:t,enumerable:!0}),o=n}).catch(e=>{console.log(`ERROR: USER COULDN'T BE OBTAINED. CODE: ${e.code}`),o="noUserFound"}),o}}async function obtainCurrentUID(){let e;return await new Promise((e,t)=>{n(r,n=>{n?e(`u${n.uid}`):t("")})}).then(t=>{e=t}).catch(t=>{console.log(t),e=null}),e}export{fetchOwnUserData,currentUserBasicInformation};