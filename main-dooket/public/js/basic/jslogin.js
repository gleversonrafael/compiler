import{signInWithEmailAndPassword as e}from"firebase/auth";import{auth as t,usersCol as s}from"./general/jsfirebase.js";import{obtainDocumentDataFromField as o,showMessageBox as i}from"./general/jsreusablestructures.js";let loginResult,messageContent=document.querySelector("#msgCon");async function loginPerson(s){let o=document.getElementById("mForm");s.preventDefault();let n=o.email.value,a=o.passw.value,r=await isUserActive(n),l,c;"dataIsAcessible"===r?await e(t,n,a).then(()=>{window.location.href="./html/main.html?currentpage=home"}).catch(e=>{c="errorMessage",l="Credenciais incorretas.",console.log(e.code)}):(c="errorMessage",l="Usu\xe1rio inexistente ou inacess\xedvel"),c&&l&&i(c,l)}async function isUserActive(e){let t=await o({collectionVariable:s,fieldName:"email",fieldValue:e}),i;return i=t&&!0===t.active&&!1===t.deleted?"dataIsAcessible":t?"dataIsNotAcessible":"dataDoesntExists",console.log(i),i}function showMsg(e){let t=document.querySelector("h1#msgT"),s=document.querySelector("p#msgD"),o=document.querySelector("img#msgIco");function i(){"cor"==e&&t.classList.contains("inc")?t.classList.remove("inc"):"inc"==e&&t.classList.contains("cor")&&t.classList.remove("cor"),t.classList.add(e)}"cor"==e?(i(),o.setAttribute("src","../media/ico/login/ico-verify.svg"),t.innerHTML="Login conclu\xeddo",s.textContent="Feche essa tela para acessar sua conta.",messageContent.style.display="flex"):(i(),o.setAttribute("src","../media/ico/login/ico-error.svg"),t.textContent="Erro",s.textContent="Dados incorretos",messageContent.style.display="flex")}function closeMsg(){messageContent.style.display="none","cor"==loginResult&&(window.location.href="./html/main.html?currentpage=home")}document.getElementById("mForm").addEventListener("submit",loginPerson),document.getElementById("closeMsgB").addEventListener("click",closeMsg);