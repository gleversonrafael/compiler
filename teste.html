<!DOCTYPE html>
<html lang="pt-br">
<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title> TestJS</title>

     <style>
          .box {
               position: absolute;

               background-color: red;
               width: 50px;
               height: 50px;
               
               animation: 1s boxANIM linear forwards;
          }

          @keyframes boxANIM {
               from {
                    bottom: 80%;
               }
               to {
                    bottom: 10%;
               }
          }

     </style>

</head>

<body>
     <h1> TestJS</h1>

     <div id="box" class="box"></div>

     <div id="boxesHere">
          <p>Aqui</p>

     </div>

     <button onclick="createBox()"> Criar</button>
     <button onclick="refreshAnimation()"> Refresh</button>

     <script>
          function createBox() {
               const area = document.getElementById("boxesHere");
               const box = document.createElement("div");
               box.classList.add("box");

               area.appendChild(box);

               console.log("FINISH")
          }


          function refreshAnimation() {
               const box = document.getElementById("box");
               let oldAnimation = box.style.animation;

               console.log("none");
               box.style.animation = "none";               

               requestAnimationFrame((frameEvent) => {
                    console.log("FE" + frameEvent)

                    if(oldAnimation != "") {
                         box.style.animation = ""

                    } else {
                         box.style.animation = "1s boxANIM linear forwards reverse"
                    }}
               )
          }

     </script>

</body>
</html>